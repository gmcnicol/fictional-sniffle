# 003 â€” Dexie Schema & Repositories

**Goal:** Durable storage for feeds, articles, settings, and read state.

## Deliverables

- Dexie database: `feeds`, `articles`, `readState`, `settings`, `folders`, `syncLog`.
- Typed repositories for CRUD operations.
- Migrations with `db.version(n).stores({...})`.

### Suggested Schemas

- `feeds`: id, url (unique), title, siteUrl, addedAt, folderId?, lastFetchedAt, etag?, lastModified?
- `articles`: id (hash of feedId+guid or link), feedId, title, link, publishedAt, summaryHtml, contentHtml, mainImageUrl, altText, author, enclosure?, fetchedAt
- `readState`: articleId, read:boolean, readAt?
- `settings`: id='app', theme, autoMarkReadThreshold, reducedMotion?, syncEveryMinutes?
- `folders`: id, name
- `syncLog`: id, feedId, status, message, at

## Acceptance Criteria

- CRUD functions with unit tests (mock Dexie with fake IndexedDB).
- Indices: feeds.url, articles.[feedId+publishedAt], readState.articleId.

## Checklist

- [ ] Dexie instance
- [ ] Stores + migrations
- [ ] Repos + tests
