# 019 — Visual Design System & Tokens Hardening

**Goal:** Establish a muted, system-dependent theme with strict tokens and component primitives. Zero ambiguity.

## Deliverables

- `src/styles/tokens.css` defining CSS variables for:
  - Colors (light/dark): `--bg`, `--bg-elev`, `--fg`, `--muted`, `--accent`, `--border` with exact hex values.
  - Typography: font stacks, sizes (rem scale), line-heights, letter-spacing.
  - Spacing: 2,4,8,12,16,24,32.
  - Radius: 4, 8, 12.
  - Shadows: subtle only, no heavy blur.
- `ThemeProvider` honoring `prefers-color-scheme` with override (system/light/dark). Persist in Dexie `settings` (fallback to localStorage pre‑init).
- Base components: `Panel`, `Toolbar`, `Button`, `IconButton`, `ListItem`, all consuming tokens. No inline color literals.

## Implementation Notes

- Dark: slightly lighter foreground on darker bg. Light: inverse. No neon, no gradients.
- Apply tokens globally on `:root` and `[data-theme]`.

## Tests

- Unit: token export sanity (no undefined), component snapshot tests.
- a11y: contrast checks for text (AA) using jest-axe.
- E2E: smoke route renders without unstyled flash; theme toggle persists across reload.

## CI Gates (Blocking)

- ESLint/Prettier: 0 errors.
- TypeScript strict: 0 errors.
- Unit + a11y tests pass.
- Axe: no contrast failures on key components.

## Acceptance Criteria

- Switching theme updates tokens without layout shift.
- No hard-coded colors in components.
- All checks pass in GitHub Actions.
